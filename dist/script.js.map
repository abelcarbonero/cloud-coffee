{"version":3,"sources":["script.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","mainNav","document","querySelector","hamburgerBtn","showMenu","classList","toggle","addEventListener","e","matches","cards","templateCard","content","cartItems","templateCartItem","cartFooter","templateCartFooter","fragment","createDocumentFragment","cart","window","products","localStorage","getItem","JSON","parse","renderCart","fetch","then","response","json","data","renderProducts","error","console","product","src","imgSrc","setAttribute","title","textContent","country","price","dataset","id","clone","cloneNode","appendChild","addItemToCart","contains","setCart","parentElement","stopPropagation","img","quantity","hasOwnProperty","innerHTML","values","renderCartFooter","setItem","stringify","totalQuantity","reduce","acc","_ref","totalPrice","_ref2","Math","round","Number","EPSILON","cartIcon","btnAction"],"mappings":"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","file":"script.js","sourcesContent":["const mainNav = document.querySelector(\".main-nav\");\r\nconst hamburgerBtn = document.querySelector(\".menu-btn\");\r\n\r\n//***** SHOW NAV MENU - BLUR & PREVENT BODY SCROLL\r\nconst showMenu = () => {\r\n  mainNav.classList.toggle(\"active\");\r\n  hamburgerBtn.classList.toggle(\"active\");\r\n  // body.classList.toggle(\"blurOverflow\");\r\n};\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  if (e.target.matches(\".menu-btn\")) {\r\n    showMenu();\r\n  }\r\n});\r\n\r\n// //*****SHOPPING CART****//\r\n\r\nconst cards = document.querySelector(\".final-products\");\r\nconst templateCard = document.querySelector(\".card\").content;\r\nconst cartItems = document.querySelector(\".cart-items\");\r\nconst templateCartItem = document.querySelector(\".cart-item-template\").content;\r\nconst cartFooter = document.querySelector(\".cart-footer\");\r\nconst templateCartFooter = document.querySelector(\r\n  \".cart-footer-template\"\r\n).content;\r\nconst fragment = document.createDocumentFragment();\r\n\r\nlet cart = {};\r\n\r\n\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  products();\r\n\r\n  if(localStorage.getItem('storagedCart')){\r\n    cart = JSON.parse(localStorage.getItem('storagedCart'))\r\n    renderCart()\r\n  }\r\n});\r\n\r\n//Data json access\r\nconst products = fetch(\"../../dist/data.json\")\r\n  .then((response) => response.json())\r\n  //.then((data) => console.log(data))\r\n  .then((data) => renderProducts(data))\r\n  .catch((error) => console.error(error));\r\n\r\n//Render products\r\nconst renderProducts = (data) => {\r\n  data.forEach((product) => {\r\n    //console.log(product)\r\n    templateCard.querySelector(\".card__img\").src = product.imgSrc;\r\n    templateCard.querySelector(\".card__img\").setAttribute(\"alt\", product.title);\r\n    templateCard.querySelector(\".card__title\").textContent = product.title;\r\n    templateCard.querySelector(\".card__country\").textContent = product.country;\r\n    templateCard.querySelector(\".card__price\").textContent = product.price;\r\n    templateCard.querySelector(\".btn--add\").dataset.id = product.id;\r\n\r\n    const clone = templateCard.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cards.appendChild(fragment);\r\n};\r\n\r\ncards.addEventListener(\"click\", (e) => {\r\n  addItemToCart(e);\r\n});\r\n\r\nconst addItemToCart = (e) => {\r\n  //console.log(e.target)\r\n  //console.log(e.target.classList.contains('btn--add'))\r\n  if (e.target.classList.contains(\"btn--add\")) {\r\n    //console.log(e.target.parentElement)\r\n    setCart(e.target.parentElement);\r\n  }\r\n  e.stopPropagation();\r\n};\r\n\r\nconst setCart = (object) => {\r\n  //console.log(object)\r\n  const product = {\r\n    id: object.querySelector(\".btn--add\").dataset.id,\r\n    title: object.querySelector(\".card__title\").textContent,\r\n    country: object.querySelector(\".card__country\").textContent,\r\n    price: object.querySelector(\".card__price\").textContent,\r\n    img: object.querySelector(\".card__img\").src,\r\n    quantity: 1,\r\n  };\r\n\r\n  if (cart.hasOwnProperty(product.id)) {\r\n    product.quantity = cart[product.id].quantity + 1;\r\n  }\r\n\r\n  cart[product.id] = { ...product };\r\n  //console.log(cart)\r\n  renderCart();\r\n};\r\n\r\nconst renderCart = () => {\r\n  //console.log(cart)\r\n  cartItems.innerHTML = \"\"; //Para limpiar el carro cada vez y que un mismo producto se sume y no se acumule al pintar los items\r\n  Object.values(cart).forEach((product) => {\r\n    templateCartItem.querySelector(\".cart-item__img\").src = product.img;\r\n    templateCartItem.querySelector(\".cart-item__title\").textContent =\r\n      product.title;\r\n    templateCartItem.querySelector(\".cart-item__price\").textContent =\r\n      product.price;\r\n    templateCartItem.querySelector(\".cart-item__quantity\").textContent =\r\n      product.quantity;\r\n    templateCartItem.querySelector(\".btn--plus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--minus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--remove\").dataset.id = product.id;\r\n\r\n    const clone = templateCartItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cartItems.appendChild(fragment);\r\n  \r\n  \r\n  renderCartFooter();\r\n\r\n  localStorage.setItem('storagedCart', JSON.stringify(cart))\r\n};\r\n\r\nconst renderCartFooter = () => {\r\n  cartFooter.innerHTML = \"\";\r\n  if (Object.keys(cart) === 0) {\r\n    cartFooter.innerHTML = `\r\n    <p>El carrito está vacío - Comience a comprar</p>\r\n    `;\r\n\r\n    return; //Si no hay nada sale y no sigue operando más hacia abajo\r\n  }\r\n\r\n  const totalQuantity = Object.values(cart).reduce(\r\n    (acc, { quantity }) => acc + quantity,\r\n    0\r\n  );\r\n  const totalPrice = Object.values(cart).reduce(\r\n    (acc, { price, quantity }) => acc + price * quantity,\r\n    0\r\n  );\r\n\r\n  //console.log(totalPrice, totalQuantity)\r\n  templateCartFooter.querySelector(\".cart-footer__quantity\").textContent =\r\n    totalQuantity;\r\n  templateCartFooter.querySelector(\".cart-footer__total\").textContent =\r\n    Math.round((totalPrice + Number.EPSILON) * 100) / 100;\r\n\r\n  const clone = templateCartFooter.cloneNode(true);\r\n  fragment.appendChild(clone);\r\n\r\n  cartFooter.appendChild(fragment);\r\n  const cartIcon = document.querySelector(\".cart-icon__quantity\");\r\n  cartIcon.textContent = totalQuantity;\r\n  if (totalQuantity === 0) {\r\n    cartIcon.textContent = \"\";\r\n  }\r\n};\r\n\r\ncartItems.addEventListener(\"click\", (e) => {\r\n  btnAction(e);\r\n});\r\n\r\nconst btnAction = (e) => {\r\n  //Aumentar cantidad\r\n  if (e.target.matches(\".btn--plus\")) {\r\n    //console.log(cart[e.target.dataset.id])\r\n    const product = cart[e.target.dataset.id];\r\n    // product.quantity = cart[e.target.dataset.id].quantity + 1\r\n    product.quantity++;\r\n    cart[e.target.dataset.id] = { ...product };\r\n    renderCart();\r\n  }\r\n  //Disminuir cantidad\r\n  if (e.target.matches(\".btn--minus\")) {\r\n    const product = cart[e.target.dataset.id];\r\n    product.quantity--;\r\n    if (product.quantity === 0) {\r\n      delete cart[e.target.dataset.id];\r\n    }\r\n    renderCart();\r\n  }\r\n  //Btn eliminar item\r\n  if (e.target.matches(\".btn--remove\")) {\r\n    delete cart[e.target.dataset.id];\r\n    renderCart();\r\n  }\r\n\r\n  e.stopPropagation();\r\n};\r\n\r\n\r\n\r\n"]}