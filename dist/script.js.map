{"version":3,"sources":["script.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","mainNav","document","querySelector","hamburgerBtn","body","showMenu","classList","toggle","addEventListener","e","matches","remove","scrollMenu","scrollTop","window","scrollY","add","header","lastScroll","stopResponsiveTransition","classes","timer","clearTimeout","setTimeout","currentScroll","contains","cards","templateCard","content","cartItems","templateCartItem","cartFooter","templateCartFooter","fragment","createDocumentFragment","cartMenuIcon","cart","localStorage","getItem","JSON","parse","renderCart","products","fetch","then","response","json","data","renderProducts","error","console","product","src","imgSrc","setAttribute","title","textContent","country","price","dataset","id","clone","cloneNode","appendChild","addItemToCart","setCart","parentElement","stopPropagation","img","quantity","hasOwnProperty","innerHTML","values","renderCartFooter","setItem","stringify","totalQuantity","reduce","acc","_ref","totalPrice","_ref2","Math","round","Number","EPSILON","btnAction"],"mappings":"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","file":"script.js","sourcesContent":["const mainNav = document.querySelector(\".main-nav\");\r\nconst hamburgerBtn = document.querySelector(\".menu-btn\");\r\nconst body = document.querySelector('body')\r\n\r\n//***** SHOW NAV MENU AND NO-SCROLL\r\nconst showMenu = () => {\r\n  mainNav.classList.toggle(\"active\");\r\n  hamburgerBtn.classList.toggle(\"active\");\r\n  body.classList.toggle(\"no-scroll\");\r\n};\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  if (e.target.matches(\".menu-btn\")){\r\n    showMenu();\r\n  }\r\n\r\n  if(e.target.matches('.main-nav__link')){\r\n    mainNav.classList.remove(\"active\");\r\n    hamburgerBtn.classList.remove(\"active\");\r\n    body.classList.remove(\"no-scroll\");\r\n  }\r\n});\r\n\r\n\r\n//***** SHOW TO TOP BTN WHEN SCROLL DOWN *****\r\nconst scrollMenu = () => {\r\n  const scrollTop = document.querySelector(\".scroll-top\");\r\n\r\n  window.scrollY > 200\r\n    ? scrollTop.classList.add(\"show-top-btn\")\r\n    : scrollTop.classList.remove(\"show-top-btn\");\r\n};\r\n\r\nwindow.addEventListener(\"scroll\", scrollMenu);\r\n\r\n\r\n//***** SHOW-HIDE TOP BAR WHEN SCROLL *****\r\nconst header = document.querySelector(\".header\");\r\nlet lastScroll = 0;\r\n\r\nwindow.addEventListener(\"scroll\", () => {\r\n  const currentScroll = window.scrollY;\r\n\r\n  if (currentScroll <= 0) {\r\n    header.classList.remove(\"scroll-up\");\r\n  }\r\n\r\n  if (currentScroll > lastScroll && !header.classList.contains(\"scroll-down\")) {\r\n    header.classList.remove(\"scroll-up\");\r\n    header.classList.add(\"scroll-down\");\r\n  }\r\n  if (currentScroll < lastScroll && header.classList.contains(\"scroll-down\")) {\r\n    header.classList.remove(\"scroll-down\");\r\n    header.classList.add(\"scroll-up\");\r\n  }\r\n\r\n  lastScroll = currentScroll;\r\n});\r\n\r\n\r\n//*****STOP RESPONSIVE TRANSITION WHEN RESIZE****//\r\nstopResponsiveTransition();\r\n\r\nfunction stopResponsiveTransition() {\r\n  const classes = document.body.classList;\r\n  let timer = null;\r\n  window.addEventListener('resize', function () {\r\n    if (timer){\r\n      clearTimeout(timer);\r\n      timer = null;\r\n    }else {\r\n      classes.add('stop-transition');\r\n    }\r\n    timer = setTimeout(() => {\r\n      classes.remove('stop-transition');\r\n      timer = null;\r\n    }, 100);\r\n  });\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//*****SHOPPING CART****//\r\n\r\nconst cards = document.querySelector(\".final-products\");\r\nconst templateCard = document.querySelector(\".card\").content;\r\nconst cartItems = document.querySelector(\".cart-items\");\r\nconst templateCartItem = document.querySelector(\".cart-item-template\").content;\r\nconst cartFooter = document.querySelector(\".cart-footer\");\r\nconst templateCartFooter = document.querySelector(\r\n  \".cart-footer-template\"\r\n).content;\r\nconst fragment = document.createDocumentFragment();\r\nconst cartMenuIcon = document.querySelector(\".cart-icon__quantity\");\r\n\r\nlet cart = {};\r\n\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n if(localStorage.getItem('storagedCart')){\r\n    cart = JSON.parse(localStorage.getItem('storagedCart'))\r\n    renderCart()\r\n  }\r\n});\r\n\r\n//Data json access\r\nconst products = fetch(\"../../dist/data.json\")\r\n  .then((response) => response.json())\r\n  //.then((data) => console.log(data))\r\n  .then((data) => renderProducts(data))\r\n  .catch((error) => console.error(error));\r\n\r\n//Render products\r\nconst renderProducts = (data) => {\r\n  data.forEach((product) => {\r\n    //console.log(product)\r\n    templateCard.querySelector(\".card__img\").src = product.imgSrc;\r\n    templateCard.querySelector(\".card__img\").setAttribute(\"alt\", product.title);\r\n    templateCard.querySelector(\".card__title\").textContent = product.title;\r\n    templateCard.querySelector(\".card__country\").textContent = product.country;\r\n    templateCard.querySelector(\".card__price\").textContent = product.price;\r\n    templateCard.querySelector(\".btn--add\").dataset.id = product.id;\r\n\r\n    const clone = templateCard.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cards.appendChild(fragment);\r\n};\r\n\r\ncards.addEventListener(\"click\", (e) => {\r\n  addItemToCart(e);\r\n});\r\n\r\nconst addItemToCart = (e) => {\r\n  //console.log(e.target)\r\n  //console.log(e.target.classList.contains('btn--add'))\r\n  if (e.target.classList.contains(\"btn--add\")) {\r\n    //console.log(e.target.parentElement)\r\n    setCart(e.target.parentElement);\r\n  }\r\n  e.stopPropagation();\r\n};\r\n\r\nconst setCart = (object) => {\r\n  //console.log(object)\r\n  const product = {\r\n    id: object.querySelector(\".btn--add\").dataset.id,\r\n    title: object.querySelector(\".card__title\").textContent,\r\n    country: object.querySelector(\".card__country\").textContent,\r\n    price: object.querySelector(\".card__price\").textContent,\r\n    img: object.querySelector(\".card__img\").src,\r\n    quantity: 1,\r\n  };\r\n\r\n  if (cart.hasOwnProperty(product.id)) {\r\n    product.quantity = cart[product.id].quantity + 1;\r\n  }\r\n\r\n  cart[product.id] = { ...product };\r\n  //console.log(cart)\r\n  renderCart();\r\n};\r\n\r\nconst renderCart = () => {\r\n  //console.log(cart)\r\n  cartItems.innerHTML = \"\"; //Para limpiar el carro cada vez y que un mismo producto se sume y no se acumule al pintar los items\r\n  Object.values(cart).forEach((product) => {\r\n    templateCartItem.querySelector(\".cart-item__img\").src = product.img;\r\n    templateCartItem.querySelector(\".cart-item__title\").textContent =\r\n      product.title;\r\n    templateCartItem.querySelector(\".cart-item__price\").textContent =\r\n      product.price;\r\n    templateCartItem.querySelector(\".cart-item__quantity\").textContent =\r\n      product.quantity;\r\n    templateCartItem.querySelector(\".btn--plus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--minus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--remove\").dataset.id = product.id;\r\n\r\n    const clone = templateCartItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cartItems.appendChild(fragment);\r\n  \r\n  \r\n  renderCartFooter();\r\n\r\n  localStorage.setItem('storagedCart', JSON.stringify(cart))\r\n};\r\n\r\n\r\n\r\n\r\nconst renderCartFooter = () => {\r\n  cartFooter.innerHTML = \"\";\r\n  if (Object.keys(cart) === 0) {\r\n    cartFooter.innerHTML = `\r\n    <p>El carrito está vacío - Comience a comprar</p>\r\n    `;\r\n\r\n    return; //Si no hay nada sale y no sigue operando más hacia abajo\r\n  }\r\n\r\n  const totalQuantity = Object.values(cart).reduce(\r\n    (acc, { quantity }) => acc + quantity,\r\n    0\r\n  );\r\n  const totalPrice = Object.values(cart).reduce(\r\n    (acc, { price, quantity }) => acc + price * quantity,\r\n    0\r\n  );\r\n\r\n  //console.log(totalPrice, totalQuantity)\r\n  templateCartFooter.querySelector(\".cart-footer__quantity\").textContent =\r\n    totalQuantity;\r\n  templateCartFooter.querySelector(\".cart-footer__total\").textContent =\r\n    Math.round((totalPrice + Number.EPSILON) * 100) / 100;\r\n\r\n  const clone = templateCartFooter.cloneNode(true);\r\n  fragment.appendChild(clone);\r\n\r\n  cartFooter.appendChild(fragment);\r\n  \r\n};\r\n\r\n\r\n\r\ncartItems.addEventListener(\"click\", (e) => {\r\n  btnAction(e);\r\n});\r\n\r\nconst btnAction = (e) => {\r\n  //Aumentar cantidad\r\n  if (e.target.matches(\".btn--plus\")) {\r\n    //console.log(cart[e.target.dataset.id])\r\n    const product = cart[e.target.dataset.id];\r\n    // product.quantity = cart[e.target.dataset.id].quantity + 1\r\n    product.quantity++;\r\n    cart[e.target.dataset.id] = { ...product };\r\n    \r\n    renderCart();\r\n  }\r\n  //Disminuir cantidad\r\n  if (e.target.matches(\".btn--minus\")) {\r\n    const product = cart[e.target.dataset.id];\r\n    product.quantity--;\r\n    if (product.quantity === 0) {\r\n      delete cart[e.target.dataset.id];\r\n    }\r\n    renderCart();\r\n  }\r\n  //Btn eliminar item\r\n  if (e.target.matches(\".btn--remove\")) {\r\n    delete cart[e.target.dataset.id];\r\n    renderCart();\r\n  }\r\n\r\n  e.stopPropagation();\r\n};\r\n\r\n\r\n\r\n\r\n\r\n"]}