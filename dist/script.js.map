{"version":3,"sources":["script.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","mainNav","document","querySelector","hamburgerBtn","body","showMenu","classList","toggle","stopResponsiveTransition","classes","timer","window","addEventListener","clearTimeout","add","setTimeout","remove","e","matches","cards","templateCard","content","cartItems","templateCartItem","cartFooter","templateCartFooter","fragment","createDocumentFragment","cartMenuIcon","cart","localStorage","getItem","JSON","parse","renderCart","products","fetch","then","response","json","data","renderProducts","error","console","product","src","imgSrc","setAttribute","title","textContent","country","price","dataset","id","clone","cloneNode","appendChild","addItemToCart","contains","setCart","parentElement","stopPropagation","img","quantity","hasOwnProperty","innerHTML","values","renderCartFooter","setItem","stringify","totalQuantity","reduce","acc","_ref","totalPrice","_ref2","Math","round","Number","EPSILON","btnAction"],"mappings":"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","file":"script.js","sourcesContent":["const mainNav = document.querySelector(\".main-nav\");\r\nconst hamburgerBtn = document.querySelector(\".menu-btn\");\r\nconst body = document.querySelector('body')\r\n\r\n//***** SHOW NAV MENU AND NO-SCROLL\r\nconst showMenu = () => {\r\n  mainNav.classList.toggle(\"active\");\r\n  hamburgerBtn.classList.toggle(\"active\");\r\n  body.classList.toggle(\"no-scroll\");\r\n};\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  if (e.target.matches(\".menu-btn\")){\r\n    showMenu();\r\n  }\r\n\r\n  if(e.target.matches('.main-nav__link')){\r\n    mainNav.classList.remove(\"active\");\r\n    hamburgerBtn.classList.remove(\"active\");\r\n    body.classList.remove(\"no-scroll\");\r\n  }\r\n});\r\n\r\n//*****STOP RESPONSIVE TRANSITION WHEN RESIZE****//\r\nstopResponsiveTransition();\r\n\r\nfunction stopResponsiveTransition() {\r\n  const classes = document.body.classList;\r\n  let timer = null;\r\n  window.addEventListener('resize', function () {\r\n    if (timer){\r\n      clearTimeout(timer);\r\n      timer = null;\r\n    }else {\r\n      classes.add('stop-transition');\r\n    }\r\n    timer = setTimeout(() => {\r\n      classes.remove('stop-transition');\r\n      timer = null;\r\n    }, 100);\r\n  });\r\n}\r\n\r\n\r\n\r\n//*****SHOPPING CART****//\r\n\r\nconst cards = document.querySelector(\".final-products\");\r\nconst templateCard = document.querySelector(\".card\").content;\r\nconst cartItems = document.querySelector(\".cart-items\");\r\nconst templateCartItem = document.querySelector(\".cart-item-template\").content;\r\nconst cartFooter = document.querySelector(\".cart-footer\");\r\nconst templateCartFooter = document.querySelector(\r\n  \".cart-footer-template\"\r\n).content;\r\nconst fragment = document.createDocumentFragment();\r\nconst cartMenuIcon = document.querySelector(\".cart-icon__quantity\");\r\n\r\nlet cart = {};\r\n\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n if(localStorage.getItem('storagedCart')){\r\n    cart = JSON.parse(localStorage.getItem('storagedCart'))\r\n    renderCart()\r\n  }\r\n});\r\n\r\n//Data json access\r\nconst products = fetch(\"../../dist/data.json\")\r\n  .then((response) => response.json())\r\n  //.then((data) => console.log(data))\r\n  .then((data) => renderProducts(data))\r\n  .catch((error) => console.error(error));\r\n\r\n//Render products\r\nconst renderProducts = (data) => {\r\n  data.forEach((product) => {\r\n    //console.log(product)\r\n    templateCard.querySelector(\".card__img\").src = product.imgSrc;\r\n    templateCard.querySelector(\".card__img\").setAttribute(\"alt\", product.title);\r\n    templateCard.querySelector(\".card__title\").textContent = product.title;\r\n    templateCard.querySelector(\".card__country\").textContent = product.country;\r\n    templateCard.querySelector(\".card__price\").textContent = product.price;\r\n    templateCard.querySelector(\".btn--add\").dataset.id = product.id;\r\n\r\n    const clone = templateCard.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cards.appendChild(fragment);\r\n};\r\n\r\ncards.addEventListener(\"click\", (e) => {\r\n  addItemToCart(e);\r\n});\r\n\r\nconst addItemToCart = (e) => {\r\n  //console.log(e.target)\r\n  //console.log(e.target.classList.contains('btn--add'))\r\n  if (e.target.classList.contains(\"btn--add\")) {\r\n    //console.log(e.target.parentElement)\r\n    setCart(e.target.parentElement);\r\n  }\r\n  e.stopPropagation();\r\n};\r\n\r\nconst setCart = (object) => {\r\n  //console.log(object)\r\n  const product = {\r\n    id: object.querySelector(\".btn--add\").dataset.id,\r\n    title: object.querySelector(\".card__title\").textContent,\r\n    country: object.querySelector(\".card__country\").textContent,\r\n    price: object.querySelector(\".card__price\").textContent,\r\n    img: object.querySelector(\".card__img\").src,\r\n    quantity: 1,\r\n  };\r\n\r\n  if (cart.hasOwnProperty(product.id)) {\r\n    product.quantity = cart[product.id].quantity + 1;\r\n  }\r\n\r\n  cart[product.id] = { ...product };\r\n  //console.log(cart)\r\n  renderCart();\r\n};\r\n\r\nconst renderCart = () => {\r\n  //console.log(cart)\r\n  cartItems.innerHTML = \"\"; //Para limpiar el carro cada vez y que un mismo producto se sume y no se acumule al pintar los items\r\n  Object.values(cart).forEach((product) => {\r\n    templateCartItem.querySelector(\".cart-item__img\").src = product.img;\r\n    templateCartItem.querySelector(\".cart-item__title\").textContent =\r\n      product.title;\r\n    templateCartItem.querySelector(\".cart-item__price\").textContent =\r\n      product.price;\r\n    templateCartItem.querySelector(\".cart-item__quantity\").textContent =\r\n      product.quantity;\r\n    templateCartItem.querySelector(\".btn--plus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--minus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--remove\").dataset.id = product.id;\r\n\r\n    const clone = templateCartItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cartItems.appendChild(fragment);\r\n  \r\n  \r\n  renderCartFooter();\r\n\r\n  localStorage.setItem('storagedCart', JSON.stringify(cart))\r\n};\r\n\r\n\r\n\r\n\r\nconst renderCartFooter = () => {\r\n  cartFooter.innerHTML = \"\";\r\n  if (Object.keys(cart) === 0) {\r\n    cartFooter.innerHTML = `\r\n    <p>El carrito está vacío - Comience a comprar</p>\r\n    `;\r\n\r\n    return; //Si no hay nada sale y no sigue operando más hacia abajo\r\n  }\r\n\r\n  const totalQuantity = Object.values(cart).reduce(\r\n    (acc, { quantity }) => acc + quantity,\r\n    0\r\n  );\r\n  const totalPrice = Object.values(cart).reduce(\r\n    (acc, { price, quantity }) => acc + price * quantity,\r\n    0\r\n  );\r\n\r\n  //console.log(totalPrice, totalQuantity)\r\n  templateCartFooter.querySelector(\".cart-footer__quantity\").textContent =\r\n    totalQuantity;\r\n  templateCartFooter.querySelector(\".cart-footer__total\").textContent =\r\n    Math.round((totalPrice + Number.EPSILON) * 100) / 100;\r\n\r\n  const clone = templateCartFooter.cloneNode(true);\r\n  fragment.appendChild(clone);\r\n\r\n  cartFooter.appendChild(fragment);\r\n  \r\n};\r\n\r\n\r\n\r\ncartItems.addEventListener(\"click\", (e) => {\r\n  btnAction(e);\r\n});\r\n\r\nconst btnAction = (e) => {\r\n  //Aumentar cantidad\r\n  if (e.target.matches(\".btn--plus\")) {\r\n    //console.log(cart[e.target.dataset.id])\r\n    const product = cart[e.target.dataset.id];\r\n    // product.quantity = cart[e.target.dataset.id].quantity + 1\r\n    product.quantity++;\r\n    cart[e.target.dataset.id] = { ...product };\r\n    \r\n    renderCart();\r\n  }\r\n  //Disminuir cantidad\r\n  if (e.target.matches(\".btn--minus\")) {\r\n    const product = cart[e.target.dataset.id];\r\n    product.quantity--;\r\n    if (product.quantity === 0) {\r\n      delete cart[e.target.dataset.id];\r\n    }\r\n    renderCart();\r\n  }\r\n  //Btn eliminar item\r\n  if (e.target.matches(\".btn--remove\")) {\r\n    delete cart[e.target.dataset.id];\r\n    renderCart();\r\n  }\r\n\r\n  e.stopPropagation();\r\n};\r\n\r\n\r\n\r\n\r\n\r\n"]}