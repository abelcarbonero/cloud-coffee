{"version":3,"sources":["script.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","mainNav","document","querySelector","hamburgerBtn","body","menuCart","addEventListener","load","getElementById","setTimeout","style","display","showMenu","classList","toggle","e","console","log","matches","remove","add","scrollMenu","scrollTop","window","scrollY","header","lastScroll","stopResponsiveTransition","classes","timer","clearTimeout","currentScroll","contains","productItems","templateProductItem","content","cartItems","templateCartItem","cartFooter","templateCartFooter","fragment","createDocumentFragment","cart","cartQuantityIcon","fetchData","localStorage","getItem","JSON","parse","renderCart","fetch","then","response","json","data","renderProducts","error","product","setAttribute","imgSrc","textContent","title","description","price","dataset","id","clone","cloneNode","appendChild","addItemToCart","setCart","parentElement","stopPropagation","cartProduct","src","quantity","hasOwnProperty","setItem","stringify","innerHTML","values","renderFooter","totalQuantity","reduce","acc","_ref","totalPrice","_ref2","Math","round","Number","EPSILON","toFixed","btnAction","item"],"mappings":"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","file":"script.js","sourcesContent":["const mainNav = document.querySelector(\".main-nav\");\r\nconst hamburgerBtn = document.querySelector(\".menu-btn\");\r\nconst body = document.querySelector(\"body\");\r\nconst menuCart = document.querySelector(\".cart\");\r\n\r\n\r\n//***** GIF LOADER *****/\r\ndocument.addEventListener('DOMContentLoaded', ()=>{\r\n  const load = document.getElementById('load')\r\n  setTimeout(() => {\r\n    load.style.display = 'none'\r\n  }, 1000);\r\n})\r\n\r\n//***** SHOW NAV MENU - NO-SCROLL WHEN NAV ACTIVE\r\nconst showMenu = () => {\r\n  mainNav.classList.toggle(\"active\");\r\n  hamburgerBtn.classList.toggle(\"active\");\r\n  body.classList.toggle(\"no-scroll\");\r\n};\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  console.log(e.target);\r\n\r\n  if (e.target.matches(\".menu-btn\")) {\r\n    showMenu();\r\n  }\r\n\r\n  if (e.target.matches(\".main-nav__link\")) {\r\n    mainNav.classList.remove(\"active\");\r\n    hamburgerBtn.classList.remove(\"active\");\r\n    body.classList.remove(\"no-scroll\");\r\n  }\r\n\r\n  //* SHOW - CLOSE CART MENU\r\n  if (e.target.matches(\".cart__close-btn\")) {\r\n    menuCart.classList.remove(\"show-cart\");\r\n  }\r\n\r\n  if (e.target.matches(\".cart-btn\")) {\r\n    menuCart.classList.add(\"show-cart\");\r\n  }\r\n});\r\n\r\n// //***** SHOW TO TOP BTN WHEN SCROLL DOWN *****\r\nconst scrollMenu = () => {\r\n  const scrollTop = document.querySelector(\".scroll-top\");\r\n\r\n  window.scrollY > 200\r\n    ? scrollTop.classList.add(\"show-top-btn\")\r\n    : scrollTop.classList.remove(\"show-top-btn\");\r\n};\r\n\r\nwindow.addEventListener(\"scroll\", scrollMenu);\r\n\r\n//***** SHOW/HIDE HEADER WHEN SCROLL *****\r\nconst header = document.querySelector(\".header\");\r\nlet lastScroll = 0;\r\n\r\nwindow.addEventListener(\"scroll\", () => {\r\n  const currentScroll = window.scrollY;\r\n\r\n  if (currentScroll <= 0) {\r\n    header.classList.remove(\"scroll-up\");\r\n  }\r\n\r\n  if (currentScroll > lastScroll && !header.classList.contains(\"scroll-down\")) {\r\n    header.classList.remove(\"scroll-up\");\r\n    header.classList.add(\"scroll-down\");\r\n  }\r\n  if (currentScroll < lastScroll && header.classList.contains(\"scroll-down\")) {\r\n    header.classList.remove(\"scroll-down\");\r\n    header.classList.add(\"scroll-up\");\r\n  }\r\n\r\n  lastScroll = currentScroll;\r\n});\r\n\r\n//***** STOP RESPONSIVE TRANSITION EFFECT WHEN RESIZE****//\r\nstopResponsiveTransition();\r\n\r\nfunction stopResponsiveTransition() {\r\n  const classes = document.body.classList;\r\n  let timer = null;\r\n  window.addEventListener(\"resize\", function () {\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n      timer = null;\r\n    } else {\r\n      classes.add(\"stop-transition\");\r\n    }\r\n    timer = setTimeout(() => {\r\n      classes.remove(\"stop-transition\");\r\n      timer = null;\r\n    }, 100);\r\n  });\r\n}\r\n\r\n//***** SHOPPING CART ****//\r\n\r\nconst productItems = document.getElementById(\"products__container\");\r\nconst templateProductItem = document.getElementById(\"template-product\").content;\r\nconst cartItems = document.getElementById(\"cart__items\");\r\nconst templateCartItem = document.getElementById(\"template-cart__item\").content;\r\nconst cartFooter = document.getElementById(\"cart__footer\");\r\nconst templateCartFooter = document.getElementById(\r\n  \"template-cart__footer\"\r\n).content;\r\nconst fragment = document.createDocumentFragment();\r\nlet cart = {};\r\nconst cartQuantityIcon = document.querySelector('.cart-btn-quantity')\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  fetchData();\r\n  if (localStorage.getItem(\"cart\")) {\r\n    cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    renderCart();\r\n  }\r\n});\r\n\r\n//Data json access\r\nconst fetchData = () => {\r\n  fetch(\"../../dist/data.json\")\r\n    .then((response) => response.json())\r\n    // .then((data) => console.log(data))\r\n    .then((data) => renderProducts(data))\r\n    .catch((error) => console.error(error));\r\n};\r\n\r\n//Render products\r\nconst renderProducts = (data) => {\r\n  //console.log(data)\r\n  data.forEach((product) => {\r\n    //console.log(product);\r\n\r\n    templateProductItem\r\n      .querySelector(\"img\")\r\n      .setAttribute(\"src\", product.imgSrc);\r\n    templateProductItem.querySelector(\".product__name\").textContent =\r\n      product.title;\r\n    templateProductItem.querySelector(\".product__description\").textContent =\r\n      product.description;\r\n    templateProductItem.querySelector(\".product__price\").textContent =\r\n      product.price;\r\n    templateProductItem.querySelector(\".product__add-btn\").dataset.id =\r\n      product.id;\r\n\r\n    const clone = templateProductItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  productItems.appendChild(fragment);\r\n};\r\n\r\n//Add event in every single product, after renderProducts()\r\nproductItems.addEventListener(\"click\", (e) => {\r\n  \r\n  addItemToCart(e);\r\n});\r\n\r\nconst addItemToCart = (e) => {\r\n  //console.log(e.target)\r\n  if (e.target.matches(\".product__add-btn\")) {\r\n    //console.log(e.target.parentElement.parentElement)\r\n    //*show cart menu\r\n    menuCart.classList.add(\"show-cart\");\r\n\r\n    setCart(e.target.parentElement.parentElement);\r\n  }\r\n  e.stopPropagation();\r\n};\r\n\r\nconst setCart = (object) => {\r\n  //console.log(object);\r\n  const cartProduct = {\r\n    imgSrc: object.querySelector(\".product__img\").src,\r\n    id: object.querySelector(\".product__add-btn\").dataset.id,\r\n    title: object.querySelector(\".product__name\").textContent,\r\n    price: object.querySelector(\".product__price\").textContent,\r\n    quantity: 1,\r\n  };\r\n  //console.log(cartProduct);\r\n  if (cart.hasOwnProperty(cartProduct.id)) {\r\n    cartProduct.quantity = cart[cartProduct.id].quantity + 1;\r\n  }\r\n\r\n  cart[cartProduct.id] = { ...cartProduct };\r\n  //console.log(cart);\r\n  renderCart();\r\n};\r\n\r\nconst renderCart = () => {\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  cartItems.innerHTML = \"\";\r\n  //console.log(cart);\r\n  Object.values(cart).forEach((cartProduct) => {\r\n    templateCartItem\r\n      .querySelector(\".cart__item-img\")\r\n      .setAttribute(\"src\", cartProduct.imgSrc);\r\n    templateCartItem.querySelector(\".cart__item-title\").textContent =\r\n      cartProduct.title;\r\n    templateCartItem.querySelector(\".cart__item-price\").textContent =\r\n      cartProduct.price;\r\n    templateCartItem.querySelector(\".cart__item-remove-btn\").dataset.id =\r\n      cartProduct.id;\r\n    templateCartItem.querySelector(\".cart__item-plus-btn\").dataset.id =\r\n      cartProduct.id;\r\n    templateCartItem.querySelector(\".cart__item-minus-btn\").dataset.id =\r\n      cartProduct.id;\r\n    templateCartItem.querySelector(\".cart__item-quantity\").textContent =\r\n      cartProduct.quantity;\r\n\r\n    const clone = templateCartItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cartItems.appendChild(fragment);\r\n\r\n  renderFooter();\r\n};\r\n\r\nconst renderFooter = () => {\r\n  //console.log(cart);\r\n  cartFooter.innerHTML = \"\";\r\n  if (Object.keys(cart).length === 0) {\r\n    cartFooter.innerHTML = `\r\n    <p>Tu cesta, está vacía.</p>\r\n    `;\r\n\r\n    return; //Así sale y no sigue hacia abajo pintando parte del footer\r\n  }\r\n\r\n  const totalQuantity = Object.values(cart).reduce(\r\n    (acc, { quantity }) => acc + quantity,\r\n    0\r\n  );\r\n  const totalPrice = Object.values(cart).reduce(\r\n    (acc, { quantity, price }) => acc + price * quantity,\r\n    0\r\n  );\r\n  //console.log(totalQuantity)\r\n  //console.log(totalPrice)\r\n  cartQuantityIcon.textContent = totalQuantity;\r\n\r\n  templateCartFooter.querySelector(\".cart__footer-quantity\").textContent =\r\n    totalQuantity;\r\n  templateCartFooter.querySelector(\".cart__footer-price\").textContent =\r\n   ( Math.round((totalPrice + Number.EPSILON) * 100) / 100).toFixed(2);\r\n\r\n  const clone = templateCartFooter.cloneNode(true);\r\n  fragment.appendChild(clone);\r\n\r\n  cartFooter.appendChild(fragment);\r\n\r\n  const clearCartBtn = document.querySelector(\".cart__footer-clear-btn\");\r\n  clearCartBtn.addEventListener(\"click\", () => {\r\n    cart = {};\r\n    cartQuantityIcon.textContent = '0'\r\n    renderCart();\r\n  });\r\n};\r\n\r\ncartItems.addEventListener(\"click\", (e) => {\r\n  btnAction(e);\r\n});\r\n\r\nconst btnAction = (e) => {\r\n  //Aumentar cantidad\r\n  if (e.target.matches(\".cart__item-plus-btn\")) {\r\n    const item = cart[e.target.dataset.id];\r\n    // item.quantity = cart[e.target.dataset.id].quantity + 1;\r\n    item.quantity++;\r\n    cart[e.target.dataset.id] = { ...item };\r\n    renderCart();\r\n  }\r\n  //Disminuir cantidad\r\n  if (e.target.matches(\".cart__item-minus-btn\")) {\r\n    const item = cart[e.target.dataset.id];\r\n    // item.quantity = cart[e.target.dataset.id].quantity - 1;\r\n    item.quantity--;\r\n    if (item.quantity === 0) {\r\n      delete cart[e.target.dataset.id];\r\n    }\r\n    renderCart();\r\n  }\r\n  //Eliminar item de la cesta\r\n  if (e.target.matches(\".cart__item-remove-btn\")) {\r\n    delete cart[e.target.dataset.id];\r\n    renderCart();\r\n  }\r\n\r\n  e.stopPropagation();\r\n};\r\n"]}