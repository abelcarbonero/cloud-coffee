{"version":3,"sources":["script.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","mainNav","document","querySelector","hamburgerBtn","showMenu","classList","toggle","addEventListener","e","matches","cards","templateCard","content","cartItems","templateCartItem","cartFooter","templateCartFooter","fragment","createDocumentFragment","cart","products","fetch","then","response","json","data","renderProducts","error","console","product","src","imgSrc","setAttribute","title","textContent","country","price","dataset","id","clone","cloneNode","appendChild","addItemToCart","contains","setCart","parentElement","stopPropagation","img","quantity","hasOwnProperty","renderCart","innerHTML","values","renderCartFooter","totalQuantity","reduce","acc","_ref","totalPrice","_ref2","Math","round","Number","EPSILON","cartIcon","btnAction"],"mappings":"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","file":"script.js","sourcesContent":["\r\n\r\nconst mainNav = document.querySelector(\".main-nav\");\r\nconst hamburgerBtn = document.querySelector(\".menu-btn\");\r\n\r\n//***** SHOW NAV MENU - BLUR & PREVENT BODY SCROLL\r\nconst showMenu = () => {\r\n  mainNav.classList.toggle(\"active\");\r\n  hamburgerBtn.classList.toggle(\"active\");\r\n  // body.classList.toggle(\"blurOverflow\");\r\n};\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  if (e.target.matches(\".menu-btn\")) {\r\n    showMenu();\r\n  }\r\n});\r\n\r\n// //*****SHOPPING CART****//\r\n\r\nconst cards = document.querySelector(\".final-products\");\r\nconst templateCard = document.querySelector(\".card\").content;\r\nconst cartItems = document.querySelector(\".cart-items\");\r\nconst templateCartItem = document.querySelector(\".cart-item-template\").content;\r\nconst cartFooter = document.querySelector(\".cart-footer\");\r\nconst templateCartFooter = document.querySelector(\r\n  \".cart-footer-template\"\r\n).content;\r\nconst fragment = document.createDocumentFragment();\r\n\r\nlet cart = {};\r\n\r\n//Data json access\r\nconst products = fetch(\"../../dist/data.json\")\r\n  .then((response) => response.json())\r\n  //.then((data) => console.log(data))\r\n  .then((data) => renderProducts(data))\r\n  .catch((error) => console.error(error));\r\n\r\n//Render products\r\nconst renderProducts = (data) => {\r\n  data.forEach((product) => {\r\n    //console.log(product)\r\n    templateCard.querySelector(\".card__img\").src = product.imgSrc;\r\n    templateCard.querySelector(\".card__img\").setAttribute(\"alt\", product.title);\r\n    templateCard.querySelector(\".card__title\").textContent = product.title;\r\n    templateCard.querySelector(\".card__country\").textContent = product.country;\r\n    templateCard.querySelector(\".card__price\").textContent = product.price;\r\n    templateCard.querySelector(\".btn--add\").dataset.id = product.id;\r\n\r\n    const clone = templateCard.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cards.appendChild(fragment);\r\n};\r\n\r\ncards.addEventListener(\"click\", (e) => {\r\n  addItemToCart(e);\r\n});\r\n\r\nconst addItemToCart = (e) => {\r\n  //console.log(e.target)\r\n  //console.log(e.target.classList.contains('btn--add'))\r\n  if (e.target.classList.contains(\"btn--add\")) {\r\n    //console.log(e.target.parentElement)\r\n    setCart(e.target.parentElement);\r\n  }\r\n  e.stopPropagation();\r\n};\r\n\r\nconst setCart = (object) => {\r\n  //console.log(object)\r\n  const product = {\r\n    id: object.querySelector(\".btn--add\").dataset.id,\r\n    title: object.querySelector(\".card__title\").textContent,\r\n    country: object.querySelector(\".card__country\").textContent,\r\n    price: object.querySelector(\".card__price\").textContent,\r\n    img: object.querySelector(\".card__img\").src,\r\n    quantity: 1,\r\n  };\r\n\r\n  if (cart.hasOwnProperty(product.id)) {\r\n    product.quantity = cart[product.id].quantity + 1;\r\n  }\r\n\r\n  cart[product.id] = { ...product };\r\n  //console.log(cart)\r\n  renderCart();\r\n};\r\n\r\nconst renderCart = () => {\r\n  //console.log(cart)\r\n  cartItems.innerHTML = \"\"; //Para limpiar el carro cada vez y que un mismo producto se sume y no se acumule al pintar los items\r\n  Object.values(cart).forEach((product) => {\r\n    templateCartItem.querySelector(\".cart-item__img\").src = product.img;\r\n    templateCartItem.querySelector(\".cart-item__title\").textContent =\r\n      product.title;\r\n    templateCartItem.querySelector(\".cart-item__price\").textContent =\r\n      product.price;\r\n    templateCartItem.querySelector(\".cart-item__quantity\").textContent =\r\n      product.quantity;\r\n    templateCartItem.querySelector(\".btn--plus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--minus\").dataset.id = product.id;\r\n    templateCartItem.querySelector(\".btn--remove\").dataset.id = product.id;\r\n\r\n    const clone = templateCartItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cartItems.appendChild(fragment);\r\n\r\n  renderCartFooter();\r\n};\r\n\r\nconst renderCartFooter = () => {\r\n  cartFooter.innerHTML = \"\";\r\n  if (Object.keys(cart) === 0) {\r\n    cartFooter.innerHTML = `\r\n    <p>El carrito está vacío - Comience a comprar</p>\r\n    `;\r\n\r\n    return; //Si no hay nada sale y no sigue operando más hacia abajo\r\n  }\r\n\r\n  const totalQuantity = Object.values(cart).reduce(\r\n    (acc, { quantity }) => acc + quantity,\r\n    0\r\n  );\r\n  const totalPrice = Object.values(cart).reduce(\r\n    (acc, { price, quantity }) => acc + price * quantity,\r\n    0\r\n  );\r\n\r\n  //console.log(totalPrice, totalQuantity)\r\n  templateCartFooter.querySelector(\".cart-footer__quantity\").textContent =\r\n    totalQuantity;\r\n  templateCartFooter.querySelector(\".cart-footer__total\").textContent =\r\n    Math.round((totalPrice + Number.EPSILON) * 100) / 100;\r\n\r\n  const clone = templateCartFooter.cloneNode(true);\r\n  fragment.appendChild(clone);\r\n\r\n  cartFooter.appendChild(fragment);\r\n  const cartIcon = document.querySelector('.cart-icon__quantity')\r\n  cartIcon.textContent = totalQuantity\r\n  if(totalQuantity === 0){\r\n    cartIcon.textContent = \"\"\r\n  } \r\n};\r\n\r\n\r\ncartItems.addEventListener(\"click\", (e)=>{\r\n  btnAction(e)\r\n})\r\n\r\nconst btnAction = (e)=>{\r\n \r\n  //Aumentar cantidad\r\n  if(e.target.matches('.btn--plus')){\r\n    //console.log(cart[e.target.dataset.id])\r\n    const product = cart[e.target.dataset.id]\r\n    // product.quantity = cart[e.target.dataset.id].quantity + 1\r\n    product.quantity++\r\n    cart[e.target.dataset.id] = {...product}\r\n    renderCart()\r\n  }\r\n  //Disminuir cantidad\r\n  if(e.target.matches('.btn--minus')){\r\n    const product = cart[e.target.dataset.id]\r\n    product.quantity--\r\n    if(product.quantity === 0){\r\n      delete cart[e.target.dataset.id]\r\n    }\r\n    renderCart()\r\n  }\r\n  //Btn eliminar item\r\n  if(e.target.matches('.btn--remove')){\r\n    delete cart[e.target.dataset.id]\r\n    renderCart()\r\n  }\r\n\r\n  e.stopPropagation()\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]}