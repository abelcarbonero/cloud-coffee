{"version":3,"sources":["script.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","mainNav","document","querySelector","hamburgerBtn","body","menuCart","showMenu","classList","toggle","addEventListener","e","console","log","matches","remove","add","scrollMenu","scrollTop","window","scrollY","header","lastScroll","stopResponsiveTransition","classes","timer","clearTimeout","setTimeout","currentScroll","contains","productItems","getElementById","templateProductItem","content","cartItems","templateCartItem","cartFooter","templateCartFooter","fragment","createDocumentFragment","cart","fetchData","localStorage","getItem","JSON","parse","renderCart","fetch","then","response","json","data","renderProducts","error","product","setAttribute","imgSrc","textContent","title","description","price","dataset","id","clone","cloneNode","appendChild","addItemToCart","setCart","parentElement","stopPropagation","cartProduct","src","quantity","hasOwnProperty","setItem","stringify","innerHTML","values","renderFooter","totalQuantity","reduce","acc","_ref","totalPrice","_ref2","btnAction","item"],"mappings":"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","file":"script.js","sourcesContent":["const mainNav = document.querySelector(\".main-nav\");\r\nconst hamburgerBtn = document.querySelector(\".menu-btn\");\r\nconst body = document.querySelector(\"body\");\r\nconst menuCart = document.querySelector(\".cart\");\r\n\r\n//***** SHOW NAV MENU - NO-SCROLL WHEN NAV ACTIVE\r\nconst showMenu = () => {\r\n  mainNav.classList.toggle(\"active\");\r\n  hamburgerBtn.classList.toggle(\"active\");\r\n  body.classList.toggle(\"no-scroll\");\r\n};\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n  console.log(e.target);\r\n\r\n  if (e.target.matches(\".menu-btn\")) {\r\n    showMenu();\r\n  }\r\n\r\n  if (e.target.matches(\".main-nav__link\")) {\r\n    mainNav.classList.remove(\"active\");\r\n    hamburgerBtn.classList.remove(\"active\");\r\n    body.classList.remove(\"no-scroll\");\r\n  }\r\n\r\n  //* SHOW - CLOSE CART MENU\r\n  if (e.target.matches(\".cart__close-btn\")) {\r\n    menuCart.classList.remove(\"show-cart\");\r\n    menuCart.classList.remove(\"show-overlay\");\r\n  }\r\n\r\n  if (e.target.matches(\".cart-btn\") || e.target.matches(\".product__add-btn\")) {\r\n    menuCart.classList.add(\"show-cart\");\r\n    menuCart.classList.add(\"show-overlay\");\r\n  }\r\n});\r\n\r\n// //***** SHOW TO TOP BTN WHEN SCROLL DOWN *****\r\nconst scrollMenu = () => {\r\n  const scrollTop = document.querySelector(\".scroll-top\");\r\n\r\n  window.scrollY > 200\r\n    ? scrollTop.classList.add(\"show-top-btn\")\r\n    : scrollTop.classList.remove(\"show-top-btn\");\r\n};\r\n\r\nwindow.addEventListener(\"scroll\", scrollMenu);\r\n\r\n//***** SHOW/HIDE HEADER WHEN SCROLL *****\r\nconst header = document.querySelector(\".header\");\r\nlet lastScroll = 0;\r\n\r\nwindow.addEventListener(\"scroll\", () => {\r\n  const currentScroll = window.scrollY;\r\n\r\n  if (currentScroll <= 0) {\r\n    header.classList.remove(\"scroll-up\");\r\n  }\r\n\r\n  if (currentScroll > lastScroll && !header.classList.contains(\"scroll-down\")) {\r\n    header.classList.remove(\"scroll-up\");\r\n    header.classList.add(\"scroll-down\");\r\n  }\r\n  if (currentScroll < lastScroll && header.classList.contains(\"scroll-down\")) {\r\n    header.classList.remove(\"scroll-down\");\r\n    header.classList.add(\"scroll-up\");\r\n  }\r\n\r\n  lastScroll = currentScroll;\r\n});\r\n\r\n//***** STOP RESPONSIVE TRANSITION EFFECT WHEN RESIZE****//\r\nstopResponsiveTransition();\r\n\r\nfunction stopResponsiveTransition() {\r\n  const classes = document.body.classList;\r\n  let timer = null;\r\n  window.addEventListener(\"resize\", function () {\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n      timer = null;\r\n    } else {\r\n      classes.add(\"stop-transition\");\r\n    }\r\n    timer = setTimeout(() => {\r\n      classes.remove(\"stop-transition\");\r\n      timer = null;\r\n    }, 100);\r\n  });\r\n}\r\n\r\n//***** SHOPPING CART ****//\r\n\r\nconst productItems = document.getElementById(\"products__container\");\r\nconst templateProductItem = document.getElementById(\"template-product\").content;\r\nconst cartItems = document.getElementById(\"cart__items\");\r\nconst templateCartItem = document.getElementById(\"template-cart__item\").content;\r\nconst cartFooter = document.getElementById(\"cart__footer\");\r\nconst templateCartFooter = document.getElementById(\r\n  \"template-cart__footer\"\r\n).content;\r\nconst fragment = document.createDocumentFragment();\r\nlet cart = {};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  fetchData();\r\n  if (localStorage.getItem(\"cart\")) {\r\n    cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    renderCart();\r\n  }\r\n});\r\n\r\n//Data json access\r\nconst fetchData = () => {\r\n  fetch(\"../../dist/data.json\")\r\n    .then((response) => response.json())\r\n    // .then((data) => console.log(data))\r\n    .then((data) => renderProducts(data))\r\n    .catch((error) => console.error(error));\r\n};\r\n\r\n//Render products\r\nconst renderProducts = (data) => {\r\n  //console.log(data)\r\n  data.forEach((product) => {\r\n    //console.log(product);\r\n\r\n    templateProductItem\r\n      .querySelector(\"img\")\r\n      .setAttribute(\"src\", product.imgSrc);\r\n    templateProductItem.querySelector(\".product__name\").textContent =\r\n      product.title;\r\n    templateProductItem.querySelector(\".product__description\").textContent =\r\n      product.description;\r\n    templateProductItem.querySelector(\".product__price\").textContent =\r\n      product.price;\r\n    templateProductItem.querySelector(\".product__add-btn\").dataset.id =\r\n      product.id;\r\n\r\n    const clone = templateProductItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  productItems.appendChild(fragment);\r\n};\r\n\r\n//Add event in every single product, after renderProducts()\r\nproductItems.addEventListener(\"click\", (e) => {\r\n  addItemToCart(e);\r\n});\r\n\r\nconst addItemToCart = (e) => {\r\n  //console.log(e.target)\r\n  if (e.target.matches(\".product__add-btn\")) {\r\n    //console.log(e.target.parentElement.parentElement)\r\n    setCart(e.target.parentElement.parentElement);\r\n  }\r\n  e.stopPropagation();\r\n};\r\n\r\nconst setCart = (object) => {\r\n  //console.log(object);\r\n  const cartProduct = {\r\n    imgSrc: object.querySelector(\".product__img\").src,\r\n    id: object.querySelector(\".product__add-btn\").dataset.id,\r\n    title: object.querySelector(\".product__name\").textContent,\r\n    price: object.querySelector(\".product__price\").textContent,\r\n    quantity: 1,\r\n  };\r\n  //console.log(cartProduct);\r\n  if (cart.hasOwnProperty(cartProduct.id)) {\r\n    cartProduct.quantity = cart[cartProduct.id].quantity + 1;\r\n  }\r\n\r\n  cart[cartProduct.id] = { ...cartProduct };\r\n  //console.log(cart);\r\n  renderCart();\r\n};\r\n\r\nconst renderCart = () => {\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  cartItems.innerHTML = \"\";\r\n  //console.log(cart);\r\n  Object.values(cart).forEach((cartProduct) => {\r\n    templateCartItem\r\n      .querySelector(\".cart__item-img\")\r\n      .setAttribute(\"src\", cartProduct.imgSrc);\r\n    templateCartItem.querySelector(\".cart__item-title\").textContent =\r\n      cartProduct.title;\r\n    templateCartItem.querySelector(\".cart__item-price\").textContent =\r\n      cartProduct.price;\r\n    templateCartItem.querySelector(\".cart__item-remove-btn\").dataset.id =\r\n      cartProduct.id;\r\n    templateCartItem.querySelector(\".cart__item-plus-btn\").dataset.id =\r\n      cartProduct.id;\r\n    templateCartItem.querySelector(\".cart__item-minus-btn\").dataset.id =\r\n      cartProduct.id;\r\n    templateCartItem.querySelector(\".cart__item-quantity\").textContent =\r\n      cartProduct.quantity;\r\n\r\n    const clone = templateCartItem.cloneNode(true);\r\n    fragment.appendChild(clone);\r\n  });\r\n\r\n  cartItems.appendChild(fragment);\r\n\r\n  renderFooter();\r\n};\r\n\r\nconst renderFooter = () => {\r\n  //console.log(cart);\r\n  cartFooter.innerHTML = \"\";\r\n  if (Object.keys(cart).length === 0) {\r\n    cartFooter.innerHTML = `\r\n    <p>Cesta vacía, comience a comprar</p>\r\n    `;\r\n\r\n    return; //Así sale y no sigue hacia abajo pintando parte del footer\r\n  }\r\n\r\n  const totalQuantity = Object.values(cart).reduce(\r\n    (acc, { quantity }) => acc + quantity,\r\n    0\r\n  );\r\n  const totalPrice = Object.values(cart).reduce(\r\n    (acc, { quantity, price }) => acc + price * quantity,\r\n    0\r\n  );\r\n  //console.log(totalQuantity)\r\n  //console.log(totalPrice)\r\n  \r\n\r\n  templateCartFooter.querySelector(\".cart__footer-quantity\").textContent =\r\n    totalQuantity;\r\n  templateCartFooter.querySelector(\".cart__footer-price\").textContent =\r\n    totalPrice;\r\n\r\n  const clone = templateCartFooter.cloneNode(true);\r\n  fragment.appendChild(clone);\r\n\r\n  cartFooter.appendChild(fragment);\r\n\r\n  const clearCartBtn = document.querySelector(\".cart__footer-clear-btn\");\r\n  clearCartBtn.addEventListener(\"click\", () => {\r\n    cart = {};\r\n    renderCart();\r\n  });\r\n};\r\n\r\ncartItems.addEventListener(\"click\", (e) => {\r\n  btnAction(e);\r\n});\r\n\r\nconst btnAction = (e) => {\r\n  //Aumentar cantidad\r\n  if (e.target.matches(\".cart__item-plus-btn\")) {\r\n    const item = cart[e.target.dataset.id];\r\n    // item.quantity = cart[e.target.dataset.id].quantity + 1;\r\n    item.quantity++;\r\n    cart[e.target.dataset.id] = { ...item };\r\n    renderCart();\r\n  }\r\n  //Disminuir cantidad\r\n  if (e.target.matches(\".cart__item-minus-btn\")) {\r\n    const item = cart[e.target.dataset.id];\r\n    // item.quantity = cart[e.target.dataset.id].quantity - 1;\r\n    item.quantity--;\r\n    if (item.quantity === 0) {\r\n      delete cart[e.target.dataset.id];\r\n    }\r\n    renderCart();\r\n  }\r\n  //Eliminar item de la cesta\r\n  if (e.target.matches(\".cart__item-remove-btn\")) {\r\n    delete cart[e.target.dataset.id];\r\n    renderCart();\r\n  }\r\n\r\n  e.stopPropagation();\r\n};\r\n"]}