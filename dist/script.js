"use strict";function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){_defineProperty(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var mainNav=document.querySelector(".main-nav"),hamburgerBtn=document.querySelector(".menu-btn"),body=document.querySelector("body"),showMenu=function(){mainNav.classList.toggle("active"),hamburgerBtn.classList.toggle("active"),body.classList.toggle("no-scroll")};document.addEventListener("click",(function(t){t.target.matches(".menu-btn")&&showMenu(),t.target.matches(".main-nav__link")&&(mainNav.classList.remove("active"),hamburgerBtn.classList.remove("active"),body.classList.remove("no-scroll"))}));var cards=document.querySelector(".final-products"),templateCard=document.querySelector(".card").content,cartItems=document.querySelector(".cart-items"),templateCartItem=document.querySelector(".cart-item-template").content,cartFooter=document.querySelector(".cart-footer"),templateCartFooter=document.querySelector(".cart-footer-template").content,fragment=document.createDocumentFragment(),cartMenuIcon=document.querySelector(".cart-icon__quantity"),cart={};document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("storagedCart")&&(cart=JSON.parse(localStorage.getItem("storagedCart")),renderCart())}));var products=fetch("../../dist/data.json").then((function(t){return t.json()})).then((function(t){return renderProducts(t)})).catch((function(t){return console.error(t)})),renderProducts=function(t){t.forEach((function(t){templateCard.querySelector(".card__img").src=t.imgSrc,templateCard.querySelector(".card__img").setAttribute("alt",t.title),templateCard.querySelector(".card__title").textContent=t.title,templateCard.querySelector(".card__country").textContent=t.country,templateCard.querySelector(".card__price").textContent=t.price,templateCard.querySelector(".btn--add").dataset.id=t.id;var e=templateCard.cloneNode(!0);fragment.appendChild(e)})),cards.appendChild(fragment)};cards.addEventListener("click",(function(t){addItemToCart(t)}));var addItemToCart=function(t){t.target.classList.contains("btn--add")&&setCart(t.target.parentElement),t.stopPropagation()},setCart=function(t){var e={id:t.querySelector(".btn--add").dataset.id,title:t.querySelector(".card__title").textContent,country:t.querySelector(".card__country").textContent,price:t.querySelector(".card__price").textContent,img:t.querySelector(".card__img").src,quantity:1};cart.hasOwnProperty(e.id)&&(e.quantity=cart[e.id].quantity+1),cart[e.id]=_objectSpread({},e),renderCart()},renderCart=function(){cartItems.innerHTML="",Object.values(cart).forEach((function(t){templateCartItem.querySelector(".cart-item__img").src=t.img,templateCartItem.querySelector(".cart-item__title").textContent=t.title,templateCartItem.querySelector(".cart-item__price").textContent=t.price,templateCartItem.querySelector(".cart-item__quantity").textContent=t.quantity,templateCartItem.querySelector(".btn--plus").dataset.id=t.id,templateCartItem.querySelector(".btn--minus").dataset.id=t.id,templateCartItem.querySelector(".btn--remove").dataset.id=t.id;var e=templateCartItem.cloneNode(!0);fragment.appendChild(e)})),cartItems.appendChild(fragment),renderCartFooter(),localStorage.setItem("storagedCart",JSON.stringify(cart))},renderCartFooter=function(){if(cartFooter.innerHTML="",0!==Object.keys(cart)){var t=Object.values(cart).reduce((function(t,e){return t+e.quantity}),0),e=Object.values(cart).reduce((function(t,e){return t+e.price*e.quantity}),0);templateCartFooter.querySelector(".cart-footer__quantity").textContent=t,templateCartFooter.querySelector(".cart-footer__total").textContent=Math.round(100*(e+Number.EPSILON))/100;var r=templateCartFooter.cloneNode(!0);fragment.appendChild(r),cartFooter.appendChild(fragment)}else cartFooter.innerHTML="\n    <p>El carrito está vacío - Comience a comprar</p>\n    "};cartItems.addEventListener("click",(function(t){btnAction(t)}));var btnAction=function(t){if(t.target.matches(".btn--plus")){var e=cart[t.target.dataset.id];e.quantity++,cart[t.target.dataset.id]=_objectSpread({},e),renderCart()}if(t.target.matches(".btn--minus")){var r=cart[t.target.dataset.id];r.quantity--,0===r.quantity&&delete cart[t.target.dataset.id],renderCart()}t.target.matches(".btn--remove")&&(delete cart[t.target.dataset.id],renderCart()),t.stopPropagation()};
//# sourceMappingURL=script.js.map